<?xml version="1.0"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE document [
  <!ENTITY project SYSTEM "project.xml">
]>
<document url="ssi-howto.html">

&project;

<properties>
<author email="glenn@apache.org">Glenn L. Nielsen</author>
<title>SSI How To</title>
</properties>

<body>

<section name="Table of Contents">
<toc/>
</section>

<section name="Introduction">

<p>SSI 는 HTML 페이지에서 위치해 페이지가 제공되는 동안 서버가 평가되는 지침입니다.
이것은 당신이 CGI 프로그램이나 혹은 다른 동적 기술을 통해 전체적인 페이지를 제공할 필요 없이
동적으로 발생된 내용들을 존재하는 HTML 페이지에 첨가할 수 있도록 합니다.</p>

<p>당신이 톰캣 SSI지원에서 추가를 한다면, 당신은 톰캣을 SSI 지원을 이용할 수 있고,
HTTP 서버로서도 사용할 수 있습니다.
전형적으로 이것은 개발하는 동안, 당신이 아파치와 같은 웹 서버가 작동하지 않기를 원할 때 이루어집니다.</p>
<p>톰캣 SSI 지원은 아파치와 같은 동일한 SSI 지침을 구현합니다. 다음의 사이트를 보십시오.
<a href="http://httpd.apache.org/docs/howto/ssi.html#basicssidirectives">
SSI에대한 아파치 소개</a> SSI 지침을 이용하는 것에 대한 소개</p>

<p>SSI 지원은 서블릿으로 및 필터로 사용할 수 있습니다.
당신은 SSI 지원을 위해 둘 중 하나를 사용할 수는 있지만 둘 다 사용할 수는 없습니다.</p>

<p>SSI지원에 기초한 서블릿은 클래스
<code>org.apache.catalina.ssi.SSIServlet</code>을 이용함으로써 구현이 가능합니다.
관습적으로, 이 서블릿은 “*.shtiml”이라는 URL 형태로 연결됩니다.</p>

<p>SSI 지원에 기초한 필터는 클래스
<code>org.apache.catalina.ssi.SSIFilter</code>를 이용함으로서 구현이 가능합니다.
관습적으로, 이 필터는 "*.shtml" 이라는 URL 형태로 연결됩니다.
하지만 그것은 "*"로 연결될 수도 있습니다.
그것은 선택적으로 MIME 유형에 따라 SSI처리를 사용 가능하게 할 수도, 무능하게 할 수도 있게 합니다.
콘텐츠 형식 초기화 매개변수는 당신이 SSI 처리를 자바 스크립트라는 JSP 페이지나,
당신이 원하는 다른 콘텐츠에 적용할 수 있도록 합니다. </p>
<p>기본적으로 SSI 지원은 톰캣에서 비활성화됩니다.</p>
</section>

<section name="Installation">

<p><strong>CAUTION</strong> - SSI 지시어는 톰캣 JVM외부에서 프로그램을 실행하는 데 사용할 수 있습니다. 당신이 만약 자바 보안관리자를 사용한다면 다음의 보안 정책 구성을 생략합니다.<code>catalina.policy.</code>
</p>

<p>SSI 서블릿을 사용하기 위해, SSI 시블릿 그리고 시블릿과 연결된 구성
<code>$CATALINA_BASE/conf/web.xml</code>으로부터 XML 주석들을 삭제하십시오. </p>

<p>SSI 필터를 사용하기 위해, SSI 필터 그리고 필터와 연결된 구성
<code>$CATALINA_BASE/conf/web.xml</code>으로부터 XML 주석들을 삭제하십시오..</p>

<P>특별한 권한이 있음으로 표시된 컨텍스트만 SSI 기능을 사용할 수 있습니다.
(컨텍스트 요소의 특별한 거권한이 있는지 보세요.) </ P>

</ section>

<section name="Servlet Configuration">

<P>SSI 시블릿의 동작을 구성할 수 있는데 사용될 수 있는 몇몇의 시블릿 초기화 매개변수가 있습니다.

<UL>
<li><strong>buffered</ strong>-이 시블릿의 결과값이 버퍼에 저장되어야 하는 것인가?
(0 = 거짓, 1 = True) 기본값 0 (FALSE) </li>
<li><strong>debug</strong> - 이 시블릿에 의해 기록된 메세지의 디버깅 상세 수치. 기본값  0.</li>
<li><strong>expires</strong> - 페이지의 SSI 지시어가 만료되기 전 초 수. 기본 동작은 모든 SSI 지시어들이 모든 요구에 대해 평가되는 것이다. </li>
<li><strong>isVirtualWebappRelative</strong> - “virtual”SSI 지시경로는  서버루트가 아닌 컨텍스트 루트와 연관된 것으로 해석될 수 있을 것인가? (0=false, 1=true) 기본값  0 (false).</li>
<li><strong>inputEncoding</strong> - The encoding to be assumed for SSI
resources if one cannot be determined from the resource itself. 기본값은 기본 플랫폼 암호화이다.</li>
<li><strong>outputEncoding</strong> - The encoding to be used for the result
of the SSI processing.기본값은 UTF-8이다.</li>
<li><strong>allowExec</strong> - exec command가 가능한가? 기본값은 false이다.</li>
</ul>
</p>

</section>

<section name="Filter Configuration">

<p>There are several filter init parameters which can be used to
configure the behaviour of the SSI filter.
<ul>
<li><strong>contentType</strong> - A regex pattern that must be matched before
SSI processing is applied. When crafting your own pattern, don't forget that a
mime content type may be followed by an optional character set in the form
"mime/type; charset=set" that you must take into account.  Default is
"text/x-server-parsed-html(;.*)?".</li>
<li><strong>debug</strong> - Debugging detail level for messages logged
by this servlet. Default 0.</li>
<li><strong>expires</strong> - The number of seconds before a page with SSI
directives will expire. Default behaviour is for all SSI directives to be
evaluated for every request.</li>
<li><strong>isVirtualWebappRelative</strong> - Should "virtual" SSI directive
paths be interpreted as relative to the context root, instead of the server
root? (0=false, 1=true) Default 0 (false).</li>
<li><strong>allowExec</strong> - Is the exec command enabled? Default is
false.</li>
</ul>
</p>

</section>

<section name="Directives">
<p>Server Side Includes are invoked by embedding SSI directives in an HTML document
 whose type will be processed by the SSI servlet. The directives take the form of an HTML
 comment. The directive is replaced by the results of interpreting it before sending the
 page to the client. The general form of a directive is: </p>
<p> <code>&lt;!--#directive [parm=value] --&gt;</code></p>
<p>The directives are:
<ul>
<li>
<strong>config</strong> - <code>&lt;!--#config timefmt=&quot;%B %Y&quot; --&gt;</code>
Used to set the format of dates and other items processed by SSI
</li>
<li>
<strong>echo</strong> -   <code>&lt;!--#echo var=&quot;VARIABLE_NAME&quot; --&gt;</code>
will be replaced by the value of the variable.
</li>
<li>
<strong>exec</strong> -  Used to run commands on the host system.
</li>
<li>
<strong>include</strong> -  <code>&lt;!--#include virtual=&quot;file-name&quot; --&gt;</code>
inserts the contents
</li>
<li>
<strong>flastmod</strong> - <code>&lt;!--#flastmod file=&quot;filename.shtml&quot; --&gt;</code>
Returns the time that a file was lost modified.
</li>
<li>
<strong>fsize</strong> - <code>&lt;!--#fsize file=&quot;filename.shtml&quot; --&gt;</code>
Returns the size of a file.
</li>
<li>
<strong>printenv</strong> - <code>&lt;!--#printenv --&gt;</code>
Returns the list of all the defined variables.
</li>
<li>
<strong>set</strong> - <code>&lt;!--#set var="foo" value="Bar" --&gt;</code>
is used to assign a value to a user-defind variable.
</li>
<li>
<strong>if elif endif else</strong> - Used to create conditional sections. For example:</li>
<code>&lt;!--#config timefmt="%A" --&gt;<br />
  &lt;!--#if expr="$DATE_LOCAL = /Monday/" --&gt;<br />
  &lt;p&gt;Meeting at 10:00 on Mondays&lt;/p&gt;<br />
  &lt;!--#elif expr="$DATE_LOCAL = /Friday/" --&gt;<br />
  &lt;p&gt;Turn in your time card&lt;/p&gt;<br />
  &lt;!--#else --&gt;<br />
  &lt;p&gt;Yoga class at noon.&lt;/p&gt;<br />
  &lt;!--#endif --&gt;</code>
 </ul>
</p>
See the
<p> <a href="http://httpd.apache.org/docs/howto/ssi.html#basicssidirectives">
Apache Introduction to SSI</a> for more information on using SSI directives.</p>
</section>

<section name="Variables">
<p>The SSI servlet currently implements the following variables:
</p>
<table border="1">
<tr>
<th>Variable Name</th>
<th>Description</th>
</tr>

<tr>
<td>AUTH_TYPE</td>
<td>
  The type of authentication used for this user: BASIC, FORM, etc.</td>
</tr>

<tr>
<td>CONTENT_LENGTH</td>
<td>
  The length of the data (in bytes or the number of
  characters) passed from a form.</td>
</tr>

<tr>
<td>CONTENT_TYPE</td>
<td>
  The MIME type of the query data, such as &quot;text/html&quot;.</td>
</tr>

<tr>
<td>DATE_GMT</td>
<td>
Current date and time in GMT</td>
</tr>

<tr>
<td>DATE_LOCAL</td>
<td>
Current date and time in the local time zone</td>
</tr>
<tr>
<td>DOCUMENT_NAME</td>
<td>
The current file</td>
</tr>
<tr>
<td>DOCUMENT_URI</td>
<td>
Virtual path to the file</td>
</tr>

<tr>
<td>GATEWAY_INTERFACE</td>
<td>
  The revision of the Common Gateway Interface that the
  server uses if enabled: &quot;CGI/1.1&quot;.</td>
</tr>

<tr>
<td>HTTP_ACCEPT</td>
<td>
  A list of the MIME types that the client can accept.</td>
</tr>

<tr>
<td>HTTP_ACCEPT_ENCODING</td>
<td>
  A list of the compression types that the client can accept.</td>
</tr>

<tr>
<td>HTTP_ACCEPT_LANGUAGE</td>
<td>
  A list of the languages that the client can accept.</td>
</tr>
<tr>
<td>HTTP_CONNECTION</td>
<td>
  The way that the connection from the client is being managed:
  &quot;Close&quot; or &quot;Keep-Alive&quot;.</td>
</tr>
<tr>
<td>HTTP_HOST</td>
<td>
  The web site that the client requested.</td>
</tr>
<tr>
<td>HTTP_REFERER</td>
<td>
  The URL of the document that the client linked from.</td>
</tr>
<tr>
<td>HTTP_USER_AGENT</td>
<td>
  The browser the client is using to issue the request.</td>
</tr>
<tr>
<td>LAST_MODIFIED</td>
<td>
Last modification date and time for current file</td>
</tr>
<tr>
<td>PATH_INFO</td>
<td>
  Extra path information passed to a servlet.</td>
</tr>
<tr>
<td>PATH_TRANSLATED</td>
<td>
  The translated version of the path given by the
  variable PATH_INFO.</td>
</tr>
<tr>
<td>QUERY_STRING</td>
<td>
The query string that follows the &quot;?&quot; in the URL.
</td>
</tr>
<tr>
<td>QUERY_STRING_UNESCAPED</td>
<td>
Undecoded query string with all shell metacharacters escaped
with &quot;\&quot;</td>
</tr>
<tr>
<td>REMOTE_ADDR</td>
<td>
  The remote IP address of the user making the request.</td>
</tr>
<tr>
<td>REMOTE_HOST</td>
<td>
  The remote hostname of the user making the request.</td>
</tr>
<tr>
<td>REMOTE_PORT</td>
<td>
  The port number at remote IP address of the user making the request.</td>
</tr>
<tr>
<td>REMOTE_USER</td>
<td>
  The authenticated name of the user.</td>
</tr>
<tr>
<td>REQUEST_METHOD</td>
<td>
  The method with which the information request was
  issued: &quot;GET&quot;, &quot;POST&quot; etc.</td>
</tr>
<tr>
<td>REQUEST_URI</td>
<td>
  The web page originally requested by the client.</td>
</tr>
<tr>
<td>SCRIPT_FILENAME</td>
<td>
  The location of the current web page on the server.</td>
</tr>
<tr>
<td>SCRIPT_NAME</td>
<td>
  The name of the web page.</td>
</tr>
<tr>
<td>SERVER_ADDR</td>
<td>
  The server's IP address.</td>
</tr>
<tr>
<td>SERVER_NAME</td>
<td>
  The server's hostname or IP address.</td>
</tr>
<tr>
<td>SERVER_PORT</td>
<td>
  The port on which the server received the request.</td>
</tr>
<tr>
<td>SERVER_PROTOCOL</td>
<td>
  The protocol used by the server. E.g. &quot;HTTP/1.1&quot;.</td>
</tr>
<tr>
<td>SERVER_SOFTWARE</td>
<td>
  The name and version of the server software that is
  answering the client request.</td>
</tr>
<tr>
<td>UNIQUE_ID</td>
<td>
  A token used to identify the current session if one
  has been established.</td>
</tr>
</table>
</section>

</body>

</document>
